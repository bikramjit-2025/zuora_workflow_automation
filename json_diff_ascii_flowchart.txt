JSON DIFF FLOWCHART
===================

MAIN PROCESS FLOW
=================

    ┌─────────────────────────────────────────────────────────────────┐
    │                    START: Parse Command Line Arguments          │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        Validate Arguments                       │
    │                                                                 │
    │  ┌─────────────┐                    ┌─────────────┐             │
    │  │   Correct   │                    │ Incorrect   │             │
    │  │   Count?    │                    │   Count?    │             │
    │  │             │                    │             │             │
    │  ▼             │                    ▼             │             │
    │ ┌─────────────┐│                   ┌─────────────┐│             │
    │ │Continue     ││                   │Print usage  ││             │
    │ │processing   ││                   │and exit     ││             │
    │ └─────────────┘│                   └─────────────┘│             │
    └─────────────────────────────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Call compare_json_files()                    │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        Load JSON Files                          │
    │  ┌─────────────────┐              ┌─────────────────┐           │
    │  │   file1.json    │              │   file2.json    │           │
    │  │                 │              │                 │           │
    │  │  Load & Parse   │              │  Load & Parse   │           │
    │  │  JSON Data      │              │  JSON Data      │           │
    │  └─────────────────┘              └─────────────────┘           │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Perform DeepDiff Comparison                  │
    │                                                                 │
    │  • ignore_order=True                                            │
    │  • Generate tree view representation                            │
    │  • Handle all change types                                      │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Display Results                              │
    │                                                                 │
    │  ┌─────────────┐              ┌─────────────┐                  │
    │  │Print Tree   │              │Export to    │                  │
    │  │View         │              │JSON File    │                  │
    │  └─────────────┘              └─────────────┘                  │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │              END: Display Summary and Exit                      │
    └─────────────────────────────────────────────────────────────────┘


JSON FILE LOADING FLOW
======================

    ┌─────────────────────────────────────────────────────────────────┐
    │                    Load JSON File                               │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        Check File Exists                        │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        File Exists?                             │
    │                                                                 │
    │  ┌─────────────┐                    ┌─────────────┐             │
    │  │     NO      │                    │     YES     │             │
    │  │             │                    │             │             │
    │  ▼             │                    ▼             │             │
    │ ┌─────────────┐│                   ┌─────────────┐│             │
    │ │Raise        ││                   │Check file   ││             │
    │ │FileNotFound ││                   │permissions  ││             │
    │ │Error        ││                   └─────────────┘│             │
    │ └─────────────┘│                                │             │
    └─────────────────────────────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        File Readable?                           │
    │                                                                 │
    │  ┌─────────────┐                    ┌─────────────┐             │
    │  │     NO      │                    │     YES     │             │
    │  │             │                    │             │             │
    │  ▼             │                    ▼             │             │
    │ ┌─────────────┐│                   ┌─────────────┐│             │
    │ │Raise        ││                   │Parse JSON   ││             │
    │ │Permission   ││                   │content      ││             │
    │ │Error        ││                   └─────────────┘│             │
    │ └─────────────┘│                                │             │
    └─────────────────────────────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        Valid JSON?                              │
    │                                                                 │
    │  ┌─────────────┐                    ┌─────────────┐             │
    │  │     NO      │                    │     YES     │             │
    │  │             │                    │             │             │
    │  ▼             │                    ▼             │             │
    │ ┌─────────────┐│                   ┌─────────────┐│             │
    │ │Raise        ││                   │Return       ││             │
    │ │JSONDecode   ││                   │parsed data  ││             │
    │ │Error        ││                   └─────────────┘│             │
    │ └─────────────┘│                                │             │
    └─────────────────────────────────────────────────────────────────┘


DEEPDIFF COMPARISON FLOW
========================

    ┌─────────────────────────────────────────────────────────────────┐
    │                    Initialize DeepDiff                          │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Configure Comparison Options                 │
    │                                                                 │
    │  • ignore_order=True (array order doesn't matter)              │
    │  • exclude_paths (commented out - can be enabled)              │
    │  • exclude_regex_paths (commented out - can be enabled)        │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Compare JSON Objects                         │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Generate Tree View                           │
    │                                                                 │
    │  • Convert DeepDiff result to tree representation               │
    │  • Organize changes by type                                     │
    │  • Handle NotPresent objects                                    │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Return Tree Result                           │
    └─────────────────────────────────────────────────────────────────┘


TREE VIEW PROCESSING FLOW
=========================

    ┌─────────────────────────────────────────────────────────────────┐
    │                    Process Tree View                            │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Check for Changes                            │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        Has Changes?                             │
    │                                                                 │
    │  ┌─────────────┐                    ┌─────────────┐             │
    │  │     NO      │                    │     YES     │             │
    │  │             │                    │             │             │
    │  ▼             │                    ▼             │             │
    │ ┌─────────────┐│                   ┌─────────────┐│             │
    │ │Print "No    ││                   │Process each ││             │
    │ │differences  ││                   │change type  ││             │
    │ │found"       ││                   └─────────────┘│             │
    │ └─────────────┘│                                │             │
    └─────────────────────────────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    For Each Change Type                         │
    │                                                                 │
    │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
    │  │values_changed│  │dict_item_add│  │dict_item_rem│             │
    │  └─────────────┘  └─────────────┘  └─────────────┘             │
    │                                                                 │
    │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
    │  │iter_item_add│  │iter_item_rem│  │type_changes │             │
    │  └─────────────┘  └─────────────┘  └─────────────┘             │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    For Each Change in Type                      │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Extract Change Information                   │
    │                                                                 │
    │  • Get change path                                              │
    │  • Get old value (t1)                                           │
    │  • Get new value (t2)                                           │
    │  • Handle NotPresent objects                                    │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Create Change Dictionary                     │
    │                                                                 │
    │  {                                                              │
    │    "path": "root['key']['subkey']",                            │
    │    "old_value": "previous value",                               │
    │    "new_value": "new value"                                     │
    │  }                                                              │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Add to Tree Dictionary                       │
    └─────────────────────────────────────────────────────────────────┘


DIFF EXPORT FLOW
================

    ┌─────────────────────────────────────────────────────────────────┐
    │                    Create Diff Export Structure                 │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Build Metadata Section                       │
    │                                                                 │
    │  {                                                              │
    │    "metadata": {                                                │
    │      "comparison_timestamp": "2024-01-01T12:00:00",            │
    │      "file1": "path/to/file1.json",                            │
    │      "file2": "path/to/file2.json",                            │
    │      "view_type": "tree",                                      │
    │      "has_differences": true/false                             │
    │    }                                                            │
    │  }                                                              │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Build Differences Section                    │
    │                                                                 │
    │  {                                                              │
    │    "differences": {                                             │
    │      "values_changed": [...],                                   │
    │      "dictionary_item_added": [...],                            │
    │      "dictionary_item_removed": [...],                          │
    │      "iterable_item_added": [...],                              │
    │      "iterable_item_removed": [...]                             │
    │    }                                                            │
    │  }                                                              │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Build Summary Section                        │
    │                                                                 │
    │  {                                                              │
    │    "summary": {                                                 │
    │      "total_changes": 42,                                       │
    │      "change_types": {                                          │
    │        "values_changed": 15,                                    │
    │        "dictionary_item_added": 5,                              │
    │        "dictionary_item_removed": 3,                            │
    │        "iterable_item_added": 12,                               │
    │        "iterable_item_removed": 7                               │
    │      }                                                          │
    │    }                                                            │
    │  }                                                              │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Write to diff_export.json                    │
    └─────────────────────────────────────────────────────────────────┘


PATH FORMATTING FLOW
====================

    ┌─────────────────────────────────────────────────────────────────┐
    │                    Format DeepDiff Path                         │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Check if Path Starts with "root"             │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        Starts with "root"?                      │
    │                                                                 │
    │  ┌─────────────┐                    ┌─────────────┐             │
    │  │     YES     │                    │     NO      │             │
    │  │             │                    │             │             │
    │  ▼             │                    ▼             │             │
    │ ┌─────────────┐│                   ┌─────────────┐│             │
    │ │Remove "root"││                   │Use path as  ││             │
    │ │prefix       ││                   │is           ││             │
    │ └─────────────┘│                   └─────────────┘│             │
    └─────────────────────────────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Format Array Indices                         │
    │                                                                 │
    │  • Replace [0] with [0] (no change needed)                     │
    │  • Replace [123] with [123] (no change needed)                 │
    │  • Keep string keys as-is                                       │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Return Formatted Path                        │
    └─────────────────────────────────────────────────────────────────┘


ERROR HANDLING FLOW
===================

    ┌─────────────────────────────────────────────────────────────────┐
    │                    Error Occurs                                │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Determine Error Type                         │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
    │  │FileNotFound │  │Permission   │  │JSONDecode   │             │
    │  │Error        │  │Error        │  │Error        │             │
    │  └─────────────┘  └─────────────┘  └─────────────┘             │
    │                                                                 │
    │  ┌─────────────┐  ┌─────────────┐                              │
    │  │Unexpected   │  │Comparison   │                              │
    │  │Error        │  │Error        │                              │
    │  └─────────────┘  └─────────────┘                              │
    └─────────────────────┬───────────────────────────────────────────┘
                          │
                          ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Handle Error                                 │
    │                                                                 │
    │  • Print error message with ❌ emoji                           │
    │  • Include relevant details (line number, column, etc.)        │
    │  • Exit with appropriate exit code                             │
    └─────────────────────────────────────────────────────────────────┘


KEY FEATURES
============

1. COMPREHENSIVE JSON COMPARISON
   ┌─────────────────────────────────────────────────────────────────┐
   │ • Deep structural comparison using DeepDiff library             │
   │ • Handles nested objects and arrays                             │
   │ • Ignores array order by default                                │
   │ • Supports all DeepDiff change types                            │
   └─────────────────────────────────────────────────────────────────┘

2. TREE VIEW REPRESENTATION
   ┌─────────────────────────────────────────────────────────────────┐
   │ • Organized by change type (values_changed, dict_item_add, etc.)│
   │ • Clear path representation for each change                     │
   │ • Handles NotPresent objects gracefully                         │
   │ • Human-readable JSON output                                    │
   └─────────────────────────────────────────────────────────────────┘

3. EXPORT FUNCTIONALITY
   ┌─────────────────────────────────────────────────────────────────┐
   │ • Exports diff to diff_export.json for programmatic access      │
   │ • Includes metadata (timestamp, file paths, etc.)              │
   │ • Provides summary statistics                                   │
   │ • Structured format for further processing                      │
   └─────────────────────────────────────────────────────────────────┘

4. ROBUST ERROR HANDLING
   ┌─────────────────────────────────────────────────────────────────┐
   │ • File existence validation                                     │
   │ • Permission checking                                           │
   │ • JSON syntax validation                                        │
   │ • Clear error messages with emojis                              │
   └─────────────────────────────────────────────────────────────────┘

5. FLEXIBLE CONFIGURATION
   ┌─────────────────────────────────────────────────────────────────┐
   │ • Command-line argument validation                              │
   │ • Configurable comparison options                               │
   │ • Optional exclusion paths (commented out)                      │
   │ • Extensible for custom requirements                            │
   └─────────────────────────────────────────────────────────────────┘

6. USER-FRIENDLY OUTPUT
   ┌─────────────────────────────────────────────────────────────────┐
   │ • Clear section headers with emojis                             │
   │ • Formatted path display                                        │
   │ • Summary statistics                                            │
   │ • Progress indicators                                           │
   └─────────────────────────────────────────────────────────────────┘


USAGE EXAMPLE
=============

    Command: python3 json_diff.py file1.json file2.json

    ┌─────────────────┐    ┌─────────────────┐
    │   file1.json    │    │   file2.json    │
    │                 │    │                 │
    │ Original JSON   │    │ Modified JSON   │
    │ file            │    │ file            │
    └─────────────────┘    └─────────────────┘
            │                       │
            └───────────────────────┼───────────────────────┘
                                    │
                                    ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │              DeepDiff compares the files                        │
    │              and generates tree view                            │
    └─────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    Console Output                               │
    │                                                                 │
    │  📊 JSON COMPARISON RESULTS (TREE VIEW)                        │
    │  🌳 TREE VIEW STRUCTURE:                                       │
    │  📈 SUMMARY: X total changes found                             │
    └─────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    diff_export.json                             │
    │                                                                 │
    │              Structured diff data for programmatic use          │
    └─────────────────────────────────────────────────────────────────┘


CHANGE TYPES SUPPORTED
======================

    ┌─────────────────────────────────────────────────────────────────┐
    │  values_changed: Existing values that have been modified        │
    │  dictionary_item_added: New keys added to objects               │
    │  dictionary_item_removed: Keys removed from objects             │
    │  iterable_item_added: New items added to arrays                 │
    │  iterable_item_removed: Items removed from arrays               │
    │  type_changes: Data type changes (string to number, etc.)       │
    │  set_item_added: Items added to sets                            │
    │  set_item_removed: Items removed from sets                      │
    └─────────────────────────────────────────────────────────────────┘
